Задача Digital Replicant создать глубокий холистичекий портрет личности.
Чтобы потом передать его в качестве системного промпта в GPT строить диалоги с максимальной приближенностью к тому как будто третье лицо общается с оригиналом, а не репликацией личности.

Определения:
Оригинал - человек с которого снимается холистический дичностный портрет
Репликант - GPT + системный промт + холистичесий портрет оригинала
Третье лицо - человек который общается в чате с репликнтом и ожидает максимальную схожеть в ответах и порядке общения близкую к оригиналу

Как это работает:
1. Оригинал желает создатьь репликанта из своей личности
2. Заходит в UI и нажимает Создать репликанта
3. Создается Replcant в ДБ
4. К нему создается Interview 1 к 1 Replicant
5. Interview содежт много Topics
7. Topic содержит много Questions
8. Question содержит Вопрос, Ответ, Эмоцию
9. Для интервьбю автоматически создается несколько обязательных топиков (кроме этого оригинал может сам начать кастомный Топик)

10. Оригинал попадает на страницу интервью
11. Видит первый дефолтный вопрос из топика Знакомство. там его просят представиться и начинается интервью

Как проходит интервью:
1. Оригинал жмет Я ответил ему предоставляется выбор эмоции
2. Выбирает эмоцию, на бек уходит вопрос+ответ+эмоция-> создаеся запись Question
3. Собирается системный промпт (каждый основной топик имеет пенрсональный системный промпт + промпт для кастомного топика)
4. Системный промпт просит задать сдледущий вопрос + в запросе прикреплены вопросы + ответы + эмоции текущего топика + же самое из топика Знакомство
5. GPT формирует следующий вопрос и от отдается Оригиналу
6. Далее согласно п.1
7. В какой то момент оригинал жмет Сменить Топик и ему предлагается на выбор существущие (может переключиться в топики в которых уже есть вопросы)
8. Так же орининал может начать кастомны топик, допустим для него важна тема Капитал Карла Маркса и он хочет его подробно обсудить и расскать что-то касаемо его
9. Если не хочет или не знает ответа, есть кнопка Пропустить Вопрос и указывает причину, например, Не хочу отвечать, слишком личное/скучное и тд

Таким образом формируется Интервью разбитое на Топики

Дале в Ui Можно нажатьь Сформировать портрет на интервью!
В результате запускается итеративный сбор холистического портрета
На каждый топик один итерат
На каждый топик свой промпт для холистического портрета по этому топику
Подразумевается что репонс от GPT Будет емким, тк мы собираемся получить максимально подробный клон личности, чтобы максимально близко эмулировать его ответы и эмоции.
Делается первый запрос по топику Знакомство, в данные отправляются все Questions c запросом сформировать подробные данные, задан примерный ответ в markdown в формате примерно таком:
# Холистический личностный портрет по топику: [Название текущего топика]
## Основные установки и взгляды
[Опиши только те ключевые установки, убеждения и ценности человека по этой теме, которые явно присутствуют в интервью.]
## Эволюция взглядов и установок
[Зафиксируй все упомянутые изменения взглядов, отношения и установок по этой теме на разных этапах жизни. Укажи причины или поводы для перемен, если они названы.]
## Эмоциональный фон
[Зафиксируй, какие эмоции сопровождали его высказывания по данной теме. Укажи особенности эмоциональности, если они есть. Если эмоциональный фон менялся в течение интервью по этой теме — зафиксируй эти изменения и что их спровоцировало (если это явно следует из интервью).]
## Ключевые события и воспоминания
[Перечисли только те жизненные эпизоды и воспоминания, которые человек озвучил в интервью по этой теме. Если топик связан с другими топиками — укажи ссылку.]
## Причинно-следственные связи
[Построй связи между событиями, переживаниями и изменениями взглядов из разных топиков, если они явно следуют из интервью. Никаких предположений.]
## Речевые паттерны и манера общения
[Опиши характерные особенности речи человека в интервью по этому топику:
Важно: общее описание манеры речи должно быть привязано к текущей теме интервью и соответствовать эмоциональному и смысловому содержанию высказанного.
## Внутренние противоречия
[Если в интервью по этой теме есть несостыковки, противоречия или нестыковки между актуальными взглядами и прошлыми установками — выдели их и поясни. Ничего не придумывай.]
## Вывод о личности по этому топику
[Обобщи выводы только по данной теме, строго на основе интервью. Какие черты характера проявляются здесь? Как человек воспринимает эту тему?]
[Ссылка на другие топики, если есть явная связь]

Далее это выводы собираются на каждом итерате вместе и каждый следущий взапрос в GPT по каждому топику всесте с Questions отправляется конкатенированный вывод по всем предыдущим топикам.

На выходе получаем конкатенацию таких портретов по каждому топику. Это уже можно использовать как Портрет личности, но он очень емкий и занимат огромное колиство токенов в контексте

Поэтому дополнительно пытаемся сделать облегченную версию - убрать все лишние повторы и тд и тп из этой общей конкатенации и собрать общий Холистический портрет.
Для этого аналогично предыдущему собираем конкатенцией запросами на темы:
['Core beliefs', 'Evolutions of views', 'Emotional background', 'Key events and memories', 'Causal links', 'Speech patterns', 'Inner contradictions', 'Biographical summary', 'Personality summary']
вот по таким подразделам с персональными промптами опять же отправляем для формирования каждого полученный большой массив данных собранный по топикам и собираем опять же большой результат путем конкатенации респонсов GPT
Этот результат ожидаемо должен быть компактнее но не менее информативный чем конкатенацию портретов по каждому топику, тк из них убраны повторы и разбито на ясную архитектуру.

Далее подразумевается что этот холистический портрет отправляет  качестве системного промпта с доп инструкцией и третье лицо ведет чат с GPT поверх которого наложен портрет личности. В ответе приходит Ответ + Эмоция и в UI отражаем текст + эмоцию.

Дальше уже возможно генерация голоса, аватара видео с синхронизацией губ и тд, это внешние обвесы, они не столь важны. Главный приоритет в этом проекте максимально точная копия личности.

Идеи:
- карточки для каждого треттьтего лица Например Супруга Анна, Брат Петр и тд
для того чтобы можно было дополнительно собирать сводку и подмешивать ее в системный промпт.
Нужно понимать что одним из топиков является Близкие люди, там планируется, что оригинал подробно расскажет про близких людей, свое к ним отношение и тд. Тч эти данные будут корелировать с картрочками третьх лиц

- эволюция взглядов:
переодически просматривать основные новости. Специальны промпт будет искать в интернете наиболее важные новости для ценностей репликаната раз в сутки. При этом докидывается для коррекции его взглядов на основе его базовых ценностей

- Воспоминания - когда оригинал в общении с GPT вспоминает истории из жизни, они так же собираются в сжатый плотный кусок чтобы можно было потом с помощьюю RAG при необходимости найти оригинал и подмешать факты в ответ

- предварительно знать текущий контекст в мире в начале каждого чата.
 на каждый вопрос от третьих лиц делать 2 запроса к GPT перый хапрос с промптом Оценщиком - выяснить требуется ли идти в интернет или примерно соориентироватьься какие данные могут понадобиться.
 например в Воспоминаниях будет предложено найти истории на тему Выпускной, если такие есть. 

