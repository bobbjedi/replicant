generator client {
  provider = "prisma-client-js"
  output   = "./client"
}

datasource db {
  provider = "sqlite"
  url      = "file:./db.sqlite"
}

model Replicant {
  id          Int        @id @default(autoincrement())
  name        String
  description String?
  createdAt   DateTime   @default(now())
  snapshot    String // Заменил Bytes на String
  interview   Interview? @relation(name: "ReplicantInterview")
}

model Interview {
  id          Int              @id @default(autoincrement())
  replicantId Int              @unique
  replicant   Replicant        @relation(name: "ReplicantInterview", fields: [replicantId], references: [id], onDelete: Cascade)
  createdAt   DateTime         @default(now())
  summary     String // Заменил Bytes на String
  topics      InterviewTopic[]
}

model InterviewTopic {
  id          Int        @id @default(autoincrement())
  interviewId Int
  name        String
  questions   Question[]
  summary     String // Заменил Bytes на String
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @default(now())
  interview   Interview  @relation(fields: [interviewId], references: [id], onDelete: Cascade)
}

model Question {
  id           Int            @id @default(autoincrement())
  topicId      Int
  questionText String
  answerText   String?
  emotion      String
  createdAt    DateTime       @default(now())
  topic        InterviewTopic @relation(fields: [topicId], references: [id], onDelete: Cascade)
}
